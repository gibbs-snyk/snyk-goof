name: Call snyk-workflow-master

on: workflow_dispatch

jobs:
  collect-snyk-filter-master:
    runs-on: ubuntu-latest
  
    steps:
      - name: Checkout .snyk file from private repo
        uses: actions/checkout@v4
        with:
          repository: gibbs-snyk/snyk-workflow-master
          path: 'snyk-workflow-master'

      - name: Upload snyk.yml file as artifact
        uses: actions/upload-artifact@v4
        with:
          name: snyk-filter-master
          path: snyk-workflow-master/snyk-filter-master/snyk.yml


  calling-workflow:
    uses: gibbs-snyk/snyk-workflow-master/.github/workflows/snyk-workflow-master.yml@main
    secrets:
      SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
